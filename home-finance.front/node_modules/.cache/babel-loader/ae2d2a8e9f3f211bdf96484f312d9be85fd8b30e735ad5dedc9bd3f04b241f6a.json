{"ast":null,"code":"/**\r\n * Serviço de API para gerenciamento de Transações\r\n * Contém todas as operações relacionadas a transações financeiras\r\n */\n\nimport axios from 'axios';\nimport { API_ENDPOINTS } from '../config/api';\n\n/**\r\n * Busca todas as transações cadastradas no sistema\r\n * @returns Promise com array de transações\r\n */\nexport const listarTransacoes = async () => {\n  try {\n    const response = await axios.get(API_ENDPOINTS.TRANSACOES.BASE);\n    return response.data;\n  } catch (error) {\n    console.error('Erro ao listar transações:', error);\n    throw new Error('Não foi possível carregar a lista de transações');\n  }\n};\n\n/**\r\n * Busca uma transação específica pelo ID\r\n * @param id - ID da transação\r\n * @returns Promise com os dados da transação\r\n */\nexport const buscarTransacaoPorId = async id => {\n  try {\n    const response = await axios.get(API_ENDPOINTS.TRANSACOES.BY_ID(id));\n    return response.data;\n  } catch (error) {\n    console.error(`Erro ao buscar transação ${id}:`, error);\n    throw new Error('Não foi possível carregar os dados da transação');\n  }\n};\n\n/**\r\n * Cria uma nova transação no sistema\r\n * IMPORTANTE: Validações de negócio que devem ser respeitadas:\r\n * 1. Se a pessoa for menor de idade (< 18 anos), apenas despesas são permitidas\r\n * 2. A categoria deve ser compatível com o tipo de transação:\r\n *    - Transação de despesa: categoria com finalidade \"Despesa\" ou \"Ambas\"\r\n *    - Transação de receita: categoria com finalidade \"Receita\" ou \"Ambas\"\r\n * \r\n * @param transacaoDto - Dados da transação a ser criada\r\n * @returns Promise com os dados da transação criada (incluindo ID gerado)\r\n */\nexport const criarTransacao = async transacaoDto => {\n  try {\n    // Validações básicas antes de enviar\n    if (!transacaoDto.descricao || transacaoDto.descricao.trim() === '') {\n      throw new Error('Descrição é obrigatória');\n    }\n    if (!transacaoDto.valor || transacaoDto.valor <= 0) {\n      throw new Error('Valor deve ser um número positivo');\n    }\n    if (!transacaoDto.tipo) {\n      throw new Error('Tipo de transação é obrigatório');\n    }\n    if (!transacaoDto.categoriaId) {\n      throw new Error('Categoria é obrigatória');\n    }\n    if (!transacaoDto.pessoaId) {\n      throw new Error('Pessoa é obrigatória');\n    }\n    const response = await axios.post(API_ENDPOINTS.TRANSACOES.BASE, transacaoDto);\n    return response.data;\n  } catch (error) {\n    console.error('Erro ao criar transação:', error);\n    if (axios.isAxiosError(error) && error.response) {\n      throw new Error(error.response.data.message || 'Não foi possível criar a transação');\n    }\n    throw error;\n  }\n};\n\n/**\r\n * Filtra transações por pessoa\r\n * Útil para exibir apenas as transações de uma pessoa específica\r\n * @param transacoes - Array de todas as transações\r\n * @param pessoaId - ID da pessoa para filtrar\r\n * @returns Array de transações da pessoa\r\n */\nexport const filtrarTransacoesPorPessoa = (transacoes, pessoaId) => {\n  return transacoes.filter(t => t.pessoaId === pessoaId);\n};\n\n/**\r\n * Filtra transações por categoria\r\n * Útil para exibir apenas as transações de uma categoria específica\r\n * @param transacoes - Array de todas as transações\r\n * @param categoriaId - ID da categoria para filtrar\r\n * @returns Array de transações da categoria\r\n */\nexport const filtrarTransacoesPorCategoria = (transacoes, categoriaId) => {\n  return transacoes.filter(t => t.categoriaId === categoriaId);\n};\n\n/**\r\n * Filtra transações por tipo (Despesa ou Receita)\r\n * @param transacoes - Array de todas as transações\r\n * @param tipo - Tipo de transação para filtrar\r\n * @returns Array de transações do tipo especificado\r\n */\nexport const filtrarTransacoesPorTipo = (transacoes, tipo) => {\n  return transacoes.filter(t => t.tipo === tipo);\n};","map":{"version":3,"names":["axios","API_ENDPOINTS","listarTransacoes","response","get","TRANSACOES","BASE","data","error","console","Error","buscarTransacaoPorId","id","BY_ID","criarTransacao","transacaoDto","descricao","trim","valor","tipo","categoriaId","pessoaId","post","isAxiosError","message","filtrarTransacoesPorPessoa","transacoes","filter","t","filtrarTransacoesPorCategoria","filtrarTransacoesPorTipo"],"sources":["E:/home-finance.cop/src/services/transacaoService.ts"],"sourcesContent":["/**\r\n * Serviço de API para gerenciamento de Transações\r\n * Contém todas as operações relacionadas a transações financeiras\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { Transacao, CriarTransacaoDto, TipoTransacao } from '../types';\r\nimport { API_ENDPOINTS } from '../config/api';\r\n\r\n/**\r\n * Busca todas as transações cadastradas no sistema\r\n * @returns Promise com array de transações\r\n */\r\nexport const listarTransacoes = async (): Promise<Transacao[]> => {\r\n  try {\r\n    const response = await axios.get<Transacao[]>(API_ENDPOINTS.TRANSACOES.BASE);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Erro ao listar transações:', error);\r\n    throw new Error('Não foi possível carregar a lista de transações');\r\n  }\r\n};\r\n\r\n/**\r\n * Busca uma transação específica pelo ID\r\n * @param id - ID da transação\r\n * @returns Promise com os dados da transação\r\n */\r\nexport const buscarTransacaoPorId = async (id: number): Promise<Transacao> => {\r\n  try {\r\n    const response = await axios.get<Transacao>(API_ENDPOINTS.TRANSACOES.BY_ID(id));\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Erro ao buscar transação ${id}:`, error);\r\n    throw new Error('Não foi possível carregar os dados da transação');\r\n  }\r\n};\r\n\r\n/**\r\n * Cria uma nova transação no sistema\r\n * IMPORTANTE: Validações de negócio que devem ser respeitadas:\r\n * 1. Se a pessoa for menor de idade (< 18 anos), apenas despesas são permitidas\r\n * 2. A categoria deve ser compatível com o tipo de transação:\r\n *    - Transação de despesa: categoria com finalidade \"Despesa\" ou \"Ambas\"\r\n *    - Transação de receita: categoria com finalidade \"Receita\" ou \"Ambas\"\r\n * \r\n * @param transacaoDto - Dados da transação a ser criada\r\n * @returns Promise com os dados da transação criada (incluindo ID gerado)\r\n */\r\nexport const criarTransacao = async (transacaoDto: CriarTransacaoDto): Promise<Transacao> => {\r\n  try {\r\n    // Validações básicas antes de enviar\r\n    if (!transacaoDto.descricao || transacaoDto.descricao.trim() === '') {\r\n      throw new Error('Descrição é obrigatória');\r\n    }\r\n    if (!transacaoDto.valor || transacaoDto.valor <= 0) {\r\n      throw new Error('Valor deve ser um número positivo');\r\n    }\r\n    if (!transacaoDto.tipo) {\r\n      throw new Error('Tipo de transação é obrigatório');\r\n    }\r\n    if (!transacaoDto.categoriaId) {\r\n      throw new Error('Categoria é obrigatória');\r\n    }\r\n    if (!transacaoDto.pessoaId) {\r\n      throw new Error('Pessoa é obrigatória');\r\n    }\r\n\r\n    const response = await axios.post<Transacao>(API_ENDPOINTS.TRANSACOES.BASE, transacaoDto);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Erro ao criar transação:', error);\r\n    if (axios.isAxiosError(error) && error.response) {\r\n      throw new Error(error.response.data.message || 'Não foi possível criar a transação');\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Filtra transações por pessoa\r\n * Útil para exibir apenas as transações de uma pessoa específica\r\n * @param transacoes - Array de todas as transações\r\n * @param pessoaId - ID da pessoa para filtrar\r\n * @returns Array de transações da pessoa\r\n */\r\nexport const filtrarTransacoesPorPessoa = (transacoes: Transacao[], pessoaId: number): Transacao[] => {\r\n  return transacoes.filter(t => t.pessoaId === pessoaId);\r\n};\r\n\r\n/**\r\n * Filtra transações por categoria\r\n * Útil para exibir apenas as transações de uma categoria específica\r\n * @param transacoes - Array de todas as transações\r\n * @param categoriaId - ID da categoria para filtrar\r\n * @returns Array de transações da categoria\r\n */\r\nexport const filtrarTransacoesPorCategoria = (transacoes: Transacao[], categoriaId: number): Transacao[] => {\r\n  return transacoes.filter(t => t.categoriaId === categoriaId);\r\n};\r\n\r\n/**\r\n * Filtra transações por tipo (Despesa ou Receita)\r\n * @param transacoes - Array de todas as transações\r\n * @param tipo - Tipo de transação para filtrar\r\n * @returns Array de transações do tipo especificado\r\n */\r\nexport const filtrarTransacoesPorTipo = (transacoes: Transacao[], tipo: TipoTransacao): Transacao[] => {\r\n  return transacoes.filter(t => t.tipo === tipo);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}