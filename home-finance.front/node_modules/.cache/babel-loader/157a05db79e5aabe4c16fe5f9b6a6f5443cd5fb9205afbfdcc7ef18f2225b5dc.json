{"ast":null,"code":"/**\r\n * Serviço de API para gerenciamento de Transações\r\n * Contém todas as operações relacionadas a transações financeiras\r\n */\n\nimport axios from 'axios';\nimport { API_ENDPOINTS } from '../config/api';\n\n/**\r\n * Busca todas as transações cadastradas no sistema\r\n * @returns Promise com array de transações\r\n */\nexport const listTransactions = async () => {\n  try {\n    const response = await axios.get(API_ENDPOINTS.TRANSACOES.BASE);\n    return response.data;\n  } catch (error) {\n    console.error('Erro ao listar transações:', error);\n    throw new Error('Não foi possível carregar a lista de transações');\n  }\n};\n\n/**\r\n * Busca uma transação específica pelo ID\r\n * @param id - ID da transação\r\n * @returns Promise com os dados da transação\r\n */\nexport const getTransactionById = async id => {\n  try {\n    const response = await axios.get(API_ENDPOINTS.TRANSACOES.BY_ID(id));\n    return response.data;\n  } catch (error) {\n    console.error(`Erro ao buscar transação ${id}:`, error);\n    throw new Error('Não foi possível carregar os dados da transação');\n  }\n};\n\n/**\r\n * Cria uma nova transação no sistema\r\n * IMPORTANTE: Validações de negócio que devem ser respeitadas:\r\n * 1. Se a pessoa for menor de idade (< 18 anos), apenas despesas são permitidas\r\n * 2. A categoria deve ser compatível com o tipo de transação:\r\n *    - Transação de despesa: categoria com finalidade \"Despesa\" ou \"Ambas\"\r\n *    - Transação de receita: categoria com finalidade \"Receita\" ou \"Ambas\"\r\n * \r\n * @param transactionDto - Dados da transação a ser criada\r\n * @returns Promise com os dados da transação criada (incluindo ID gerado)\r\n */\nexport const createTransaction = async transactionDto => {\n  try {\n    // Validações básicas antes de enviar\n    if (!transactionDto.description || transactionDto.description.trim() === '') {\n      throw new Error('Descrição é obrigatória');\n    }\n    if (!transactionDto.amount || transactionDto.amount <= 0) {\n      throw new Error('Valor deve ser um número positivo');\n    }\n    if (!transactionDto.date) {\n      throw new Error('Data é obrigatória');\n    }\n    if (transactionDto.type === undefined || transactionDto.type === null) {\n      throw new Error('Tipo de transação é obrigatório');\n    }\n    if (!transactionDto.categoryId) {\n      throw new Error('Categoria é obrigatória');\n    }\n    if (!transactionDto.personId) {\n      throw new Error('Pessoa é obrigatória');\n    }\n    const response = await axios.post(API_ENDPOINTS.TRANSACOES.BASE, transactionDto);\n    return response.data;\n  } catch (error) {\n    console.error('Erro ao criar transação:', error);\n    if (axios.isAxiosError(error) && error.response) {\n      throw new Error(error.response.data.message || 'Não foi possível criar a transação');\n    }\n    throw error;\n  }\n};\n\n/**\r\n * Atualiza uma transação existente no sistema\r\n * @param id - ID da transação a ser atualizada\r\n * @param transactionDto - Dados a serem atualizados (campos opcionais)\r\n * @returns Promise com os dados da transação atualizada\r\n */\nexport const updateTransaction = async (id, transactionDto) => {\n  try {\n    const response = await axios.put(API_ENDPOINTS.TRANSACOES.BY_ID(id), transactionDto);\n    return response.data;\n  } catch (error) {\n    console.error(`Erro ao atualizar transação ${id}:`, error);\n    if (axios.isAxiosError(error) && error.response) {\n      throw new Error(error.response.data.message || 'Não foi possível atualizar a transação');\n    }\n    throw new Error('Não foi possível atualizar a transação');\n  }\n};\n\n/**\r\n * Filtra transações por pessoa\r\n * Útil para exibir apenas as transações de uma pessoa específica\r\n * @param transactions - Array de todas as transações\r\n * @param personId - ID da pessoa para filtrar\r\n * @returns Array de transações da pessoa\r\n */\nexport const filterTransactionsByPerson = (transactions, personId) => {\n  return transactions.filter(t => t.personId === personId);\n};\n\n/**\r\n * Filtra transações por categoria\r\n * Útil para exibir apenas as transações de uma categoria específica\r\n * @param transactions - Array de todas as transações\r\n * @param categoryId - ID da categoria para filtrar\r\n * @returns Array de transações da categoria\r\n */\nexport const filterTransactionsByCategory = (transactions, categoryId) => {\n  return transactions.filter(t => t.categoryId === categoryId);\n};\n\n/**\r\n * Filtra transações por tipo (Despesa ou Receita)\r\n * @param transactions - Array de todas as transações\r\n * @param type - Tipo de transação para filtrar\r\n * @returns Array de transações do tipo especificado\r\n */\nexport const filterTransactionsByType = (transactions, type) => {\n  return transactions.filter(t => t.type === type);\n};","map":{"version":3,"names":["axios","API_ENDPOINTS","listTransactions","response","get","TRANSACOES","BASE","data","error","console","Error","getTransactionById","id","BY_ID","createTransaction","transactionDto","description","trim","amount","date","type","undefined","categoryId","personId","post","isAxiosError","message","updateTransaction","put","filterTransactionsByPerson","transactions","filter","t","filterTransactionsByCategory","filterTransactionsByType"],"sources":["E:/home-finance.front/src/services/transactionService.ts"],"sourcesContent":["/**\r\n * Serviço de API para gerenciamento de Transações\r\n * Contém todas as operações relacionadas a transações financeiras\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { Transaction, CreateTransactionDto, UpdateTransactionDto, TransactionType } from '../types';\r\nimport { API_ENDPOINTS } from '../config/api';\r\n\r\n/**\r\n * Busca todas as transações cadastradas no sistema\r\n * @returns Promise com array de transações\r\n */\r\nexport const listTransactions = async (): Promise<Transaction[]> => {\r\n  try {\r\n    const response = await axios.get<Transaction[]>(API_ENDPOINTS.TRANSACOES.BASE);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Erro ao listar transações:', error);\r\n    throw new Error('Não foi possível carregar a lista de transações');\r\n  }\r\n};\r\n\r\n/**\r\n * Busca uma transação específica pelo ID\r\n * @param id - ID da transação\r\n * @returns Promise com os dados da transação\r\n */\r\nexport const getTransactionById = async (id: number): Promise<Transaction> => {\r\n  try {\r\n    const response = await axios.get<Transaction>(API_ENDPOINTS.TRANSACOES.BY_ID(id));\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Erro ao buscar transação ${id}:`, error);\r\n    throw new Error('Não foi possível carregar os dados da transação');\r\n  }\r\n};\r\n\r\n/**\r\n * Cria uma nova transação no sistema\r\n * IMPORTANTE: Validações de negócio que devem ser respeitadas:\r\n * 1. Se a pessoa for menor de idade (< 18 anos), apenas despesas são permitidas\r\n * 2. A categoria deve ser compatível com o tipo de transação:\r\n *    - Transação de despesa: categoria com finalidade \"Despesa\" ou \"Ambas\"\r\n *    - Transação de receita: categoria com finalidade \"Receita\" ou \"Ambas\"\r\n * \r\n * @param transactionDto - Dados da transação a ser criada\r\n * @returns Promise com os dados da transação criada (incluindo ID gerado)\r\n */\r\nexport const createTransaction = async (transactionDto: CreateTransactionDto): Promise<Transaction> => {\r\n  try {\r\n    // Validações básicas antes de enviar\r\n    if (!transactionDto.description || transactionDto.description.trim() === '') {\r\n      throw new Error('Descrição é obrigatória');\r\n    }\r\n    if (!transactionDto.amount || transactionDto.amount <= 0) {\r\n      throw new Error('Valor deve ser um número positivo');\r\n    }\r\n    if (!transactionDto.date) {\r\n      throw new Error('Data é obrigatória');\r\n    }\r\n    if (transactionDto.type === undefined || transactionDto.type === null) {\r\n      throw new Error('Tipo de transação é obrigatório');\r\n    }\r\n    if (!transactionDto.categoryId) {\r\n      throw new Error('Categoria é obrigatória');\r\n    }\r\n    if (!transactionDto.personId) {\r\n      throw new Error('Pessoa é obrigatória');\r\n    }\r\n\r\n    const response = await axios.post<Transaction>(API_ENDPOINTS.TRANSACOES.BASE, transactionDto);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Erro ao criar transação:', error);\r\n    if (axios.isAxiosError(error) && error.response) {\r\n      throw new Error(error.response.data.message || 'Não foi possível criar a transação');\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Atualiza uma transação existente no sistema\r\n * @param id - ID da transação a ser atualizada\r\n * @param transactionDto - Dados a serem atualizados (campos opcionais)\r\n * @returns Promise com os dados da transação atualizada\r\n */\r\nexport const updateTransaction = async (id: number, transactionDto: UpdateTransactionDto): Promise<Transaction> => {\r\n  try {\r\n    const response = await axios.put<Transaction>(API_ENDPOINTS.TRANSACOES.BY_ID(id), transactionDto);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Erro ao atualizar transação ${id}:`, error);\r\n    if (axios.isAxiosError(error) && error.response) {\r\n      throw new Error(error.response.data.message || 'Não foi possível atualizar a transação');\r\n    }\r\n    throw new Error('Não foi possível atualizar a transação');\r\n  }\r\n};\r\n\r\n/**\r\n * Filtra transações por pessoa\r\n * Útil para exibir apenas as transações de uma pessoa específica\r\n * @param transactions - Array de todas as transações\r\n * @param personId - ID da pessoa para filtrar\r\n * @returns Array de transações da pessoa\r\n */\r\nexport const filterTransactionsByPerson = (transactions: Transaction[], personId: number): Transaction[] => {\r\n  return transactions.filter(t => t.personId === personId);\r\n};\r\n\r\n/**\r\n * Filtra transações por categoria\r\n * Útil para exibir apenas as transações de uma categoria específica\r\n * @param transactions - Array de todas as transações\r\n * @param categoryId - ID da categoria para filtrar\r\n * @returns Array de transações da categoria\r\n */\r\nexport const filterTransactionsByCategory = (transactions: Transaction[], categoryId: number): Transaction[] => {\r\n  return transactions.filter(t => t.categoryId === categoryId);\r\n};\r\n\r\n/**\r\n * Filtra transações por tipo (Despesa ou Receita)\r\n * @param transactions - Array de todas as transações\r\n * @param type - Tipo de transação para filtrar\r\n * @returns Array de transações do tipo especificado\r\n */\r\nexport const filterTransactionsByType = (transactions: Transaction[], type: TransactionType): Transaction[] => {\r\n  return transactions.filter(t => t.type === type);\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}